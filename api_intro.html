<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Components of the download package &#8212; simeon  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="_static/material.css?v=79c92029" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="simeon" href="cli_intro.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#api_intro" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="simeon  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">simeon</span>
          <span class="md-header-nav__topic"> Components of the download package </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/MIT-IR/simeon/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    simeon
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = ""versions.json"",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">simeon  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="simeon documentation" class="md-nav__button md-logo">
      
        <img src="_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="simeon documentation">simeon</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/MIT-IR/simeon/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    simeon
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#api-intro--page-root" class="md-nav__link">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">download</span></code> package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#module-simeon.download.aws" class="md-nav__link">AWS module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.aws.S3Blob" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">S3Blob</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.aws.S3Blob.download_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">S3Blob.download_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.aws.S3Blob.from_info" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">S3Blob.from_info()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.aws.S3Blob.from_prefix" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">S3Blob.from_prefix()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.aws.S3Blob.to_json" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">S3Blob.to_json()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.aws.get_file_date" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_file_date()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.aws.make_s3_bucket" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_s3_bucket()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#module-simeon.download.emails" class="md-nav__link">Email opt-in module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.emails.compress_email_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">compress_email_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.emails.parse_date" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">parse_date()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.emails.process_email_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">process_email_file()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#module-simeon.download.logs" class="md-nav__link">Tracking logs module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.logs.batch_split_tracking_logs" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">batch_split_tracking_logs()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.logs.process_line" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">process_line()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.logs.split_tracking_log" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">split_tracking_log()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#module-simeon.download.sqls" class="md-nav__link">SQL data files module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.sqls.batch_decrypt_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">batch_decrypt_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.sqls.force_delete_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">force_delete_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.sqls.process_sql_archive" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">process_sql_archive()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.sqls.unpacker" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">unpacker()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#module-simeon.download.utilities" class="md-nav__link">Utilities module for the download package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.download.utilities.check_for_funny_keys" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">check_for_funny_keys()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.decrypt_files" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">decrypt_files()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.drop_empties" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">drop_empties()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.format_sql_filename" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">format_sql_filename()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.get_course_id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_course_id()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.get_file_date" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_file_date()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.get_module_id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_module_id()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.get_sql_course_id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_sql_course_id()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.is_float" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">is_float()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.make_file_handle" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_file_handle()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.make_tracklog_path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_tracklog_path()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.move_field_to_mongoid" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">move_field_to_mongoid()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.move_unknown_fields_to_agent" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">move_unknown_fields_to_agent()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.parse_mongo_tstamp" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">parse_mongo_tstamp()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.rephrase_record" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">rephrase_record()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.download.utilities.stringify_dict" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">stringify_dict()</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#components-of-the-upload-package" class="md-nav__link">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">upload</span></code> package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#module-simeon.upload.gcp" class="md-nav__link">GCP module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.export_compiled_query" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.export_compiled_query()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.extract_error_messages" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.extract_error_messages()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.get_course_tables" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.get_course_tables()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.get_not_found_object" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.get_not_found_object()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.has_latest_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.has_latest_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.has_log_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.has_log_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.load_one_file_to_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.load_one_file_to_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.load_tables_from_dir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.load_tables_from_dir()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.make_template" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.make_template()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.BigqueryClient.merge_to_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigqueryClient.merge_to_table()</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.GCSClient" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">GCSClient</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.upload.gcp.GCSClient.load_dir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">GCSClient.load_dir()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.gcp.GCSClient.load_one_file_to_gcs" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">GCSClient.load_one_file_to_gcs()</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#module-simeon.upload.utilities" class="md-nav__link">Utilities module for the upload package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.upload.utilities.course_to_bq_dataset" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">course_to_bq_dataset()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.course_to_gcs_folder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">course_to_gcs_folder()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.dict_to_schema_field" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">dict_to_schema_field()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.get_bq_schema" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_bq_schema()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.local_to_bq_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">local_to_bq_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.local_to_gcs_path" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">local_to_gcs_path()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.make_bq_load_config" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_bq_load_config()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.make_bq_query_config" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_bq_query_config()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.upload.utilities.sqlify_bq_field" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">sqlify_bq_field()</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#components-of-the-report-package" class="md-nav__link">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">report</span></code> package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#module-simeon.report.utilities" class="md-nav__link">Utilities module for the report package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.report.utilities.check_record_schema" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">check_record_schema()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.course_from_block" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">course_from_block()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.drop_extra_keys" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">drop_extra_keys()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.extract_table_query" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">extract_table_query()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.get_has_solution" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_has_solution()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.get_problem_nitems" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_problem_nitems()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.get_youtube_id" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_youtube_id()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_course_axis" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_course_axis()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_forum_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_forum_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_grades_persistent" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_grades_persistent()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_grading_policy" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_grading_policy()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_problem_analysis" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_problem_analysis()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_roles_table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_roles_table()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_sql_tables_par" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_sql_tables_par()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_sql_tables_seq" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_sql_tables_seq()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_student_module" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_student_module()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_table_from_sql" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_table_from_sql()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_tables_from_sql" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_tables_from_sql()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_tables_from_sql_par" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_tables_from_sql_par()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.make_user_info_combo" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">make_user_info_combo()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.module_from_block" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">module_from_block()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.process_course_structure" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">process_course_structure()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.wait_for_bq_job_ids" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">wait_for_bq_job_ids()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.report.utilities.wait_for_bq_jobs" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">wait_for_bq_jobs()</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#components-of-the-exceptions-package" class="md-nav__link">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">exceptions</span></code> package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#module-simeon.exceptions" class="md-nav__link">Exceptions module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simeon.exceptions.AWSException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">AWSException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.BadSQLFileException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BadSQLFileException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.BigQueryNameException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BigQueryNameException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.BlobDownloadError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">BlobDownloadError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.DecryptionError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">DecryptionError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.EarlyExitError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">EarlyExitError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.LoadJobException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">LoadJobException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.MissingFileException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MissingFileException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.MissingQueryFileException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MissingQueryFileException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.MissingSchemaException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MissingSchemaException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.SQLQueryException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">SQLQueryException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.SchemaMismatchException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">SchemaMismatchException</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.SimeonError" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">SimeonError</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#simeon.exceptions.SplitException" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">SplitException</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/api_intro.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <p>The python API of this tool is divided into the following sections:</p>
<ul class="simple">
<li><p>download: Handles the downloading of data files from s3. It matches up with the <code class="docutils literal notranslate"><span class="pre">simeon</span> <span class="pre">download</span></code> and <code class="docutils literal notranslate"><span class="pre">simeon</span> <span class="pre">split</span></code> commands</p></li>
<li><p>upload: Handles the uploading of data to GCS and BigQuery. It matches up with the <code class="docutils literal notranslate"><span class="pre">simeon</span> <span class="pre">push</span></code> command</p></li>
<li><p>report: Handles the generation of secondary tables in BigQuery. It matches up with the <code class="docutils literal notranslate"><span class="pre">simeon</span> <span class="pre">report</span></code> command</p></li>
</ul>
<section id="components-of-the-download-package">
<h1 id="api-intro--page-root">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">download</span></code> package<a class="headerlink" href="#api-intro--page-root" title="Link to this heading">¶</a></h1>
<section id="module-simeon.download.aws">
<span id="aws-module"></span><h2 id="module-simeon.download.aws">AWS module<a class="headerlink" href="#module-simeon.download.aws" title="Link to this heading">¶</a></h2>
<p>Module of utilities to help with listing and downloading files from S3</p>
<dl class="py class">
<dt class="sig sig-object py" id="simeon.download.aws.S3Blob">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.download.aws.</span></span><span class="sig-name descname"><span class="pre">S3Blob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_modified</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.S3Blob" title="Link to this definition">¶</a></dt>
<dd><p>A class to represent S3 blobs</p>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.download.aws.S3Blob.download_file">
<span class="sig-name descname"><span class="pre">download_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.S3Blob.download_file" title="Link to this definition">¶</a></dt>
<dd><p>Download the S3Blob to the local file system
and return the full path where the file is saved</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Name of the output file</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the full path where the file is saved</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.download.aws.S3Blob.from_info">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">org</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mitx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">site</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'edx'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.S3Blob.from_info" title="Link to this definition">¶</a></dt>
<dd><p>Make a list of blobs with the given parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket</strong> (<em>s3.Bucket</em>) – The boto3.s3.Bucket object to tie to this blob</p></li>
<li><p><strong>type</strong> (<em>str</em>) – “sql” or “email” or “sql”</p></li>
<li><p><strong>date</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>datetime</em><em>]</em>) – A datetime or str object for a threshold date</p></li>
<li><p><strong>org</strong> (<em>str</em>) – The org whose data will be fetched.</p></li>
<li><p><strong>site</strong> (<em>str</em>) – The site from which data were generated</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#simeon.download.aws.S3Blob" title="simeon.download.aws.S3Blob">S3Blob</a>]</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>AWSException</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.download.aws.S3Blob.from_prefix">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.S3Blob.from_prefix" title="Link to this definition">¶</a></dt>
<dd><p>Fetch a list of S3Blob objects from AWS whose names
have the given prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bucket</strong> (<em>s3.Bucket</em>) – The boto3.s3.Bucket object to tie to this blob</p></li>
<li><p><strong>prefix</strong> (<em>str</em>) – A string with which to filter the list of objects</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#simeon.download.aws.S3Blob" title="simeon.download.aws.S3Blob">S3Blob</a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of S3Blob objects</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>AWSException</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.download.aws.S3Blob.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.S3Blob.to_json" title="Link to this definition">¶</a></dt>
<dd><p>Jsonify the Blob</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.aws.get_file_date">
<span class="sig-prename descclassname"><span class="pre">simeon.download.aws.</span></span><span class="sig-name descname"><span class="pre">get_file_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.get_file_date" title="Link to this definition">¶</a></dt>
<dd><p>Get the date in the name of the S3 blob</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.aws.make_s3_bucket">
<span class="sig-prename descclassname"><span class="pre">simeon.download.aws.</span></span><span class="sig-name descname"><span class="pre">make_s3_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_secret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.aws.make_s3_bucket" title="Link to this definition">¶</a></dt>
<dd><p>Make a simple boto3 Bucket object pointing to S3</p>
</dd></dl>
</section>
<section id="module-simeon.download.emails">
<span id="email-opt-in-module"></span><h2 id="module-simeon.download.emails">Email opt-in module<a class="headerlink" href="#module-simeon.download.emails" title="Link to this heading">¶</a></h2>
<p>Module to process email opt-in data from edX</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.emails.compress_email_files">
<span class="sig-prename descclassname"><span class="pre">simeon.download.emails.</span></span><span class="sig-name descname"><span class="pre">compress_email_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.emails.compress_email_files" title="Link to this definition">¶</a></dt>
<dd><p>Generate a GZIP JSON file in the given ddir directory
using the contents of the files.
:NOTE: schema_dir is not used yet. But we may use to check that
the generated records match their destination tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – An iterable of email opt-in CSV files to process</p></li>
<li><p><strong>ddir</strong> (<em>str</em>) – A destination directory</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Writes the contents of files into email_opt_in.json.gz</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.emails.parse_date">
<span class="sig-prename descclassname"><span class="pre">simeon.download.emails.</span></span><span class="sig-name descname"><span class="pre">parse_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datestr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.emails.parse_date" title="Link to this definition">¶</a></dt>
<dd><p>Convert datestr to an iso formatted date. If not possible, return None</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.emails.process_email_file">
<span class="sig-prename descclassname"><span class="pre">simeon.download.emails.</span></span><span class="sig-name descname"><span class="pre">process_email_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.emails.process_email_file" title="Link to this definition">¶</a></dt>
<dd><p>Email opt-in files are kind of different in that
they are zip archives inside which reside GPG encrypted files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Zip archive containing the email opt-in data file</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Whether to print stuff when decrypting</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A Logger object to print messages with</p></li>
<li><p><strong>timeout</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>None</em><em>]</em>) – Number of seconds to wait for the decryption to finish</p></li>
<li><p><strong>keepfiles</strong> (<em>bool</em>) – Whether to keep the .gpg files after decrypting them</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the path to the decrypted file</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-simeon.download.logs">
<span id="tracking-logs-module"></span><h2 id="module-simeon.download.logs">Tracking logs module<a class="headerlink" href="#module-simeon.download.logs" title="Link to this heading">¶</a></h2>
<p>Module to process tracking log files from edX</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.logs.batch_split_tracking_logs">
<span class="sig-prename descclassname"><span class="pre">simeon.download.logs.</span></span><span class="sig-name descname"><span class="pre">batch_split_tracking_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">courses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.logs.batch_split_tracking_logs" title="Link to this definition">¶</a></dt>
<dd><p>Call split_tracking_log on each file inside a process or thread pool</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.logs.process_line">
<span class="sig-prename descclassname"><span class="pre">simeon.download.logs.</span></span><span class="sig-name descname"><span class="pre">process_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lcount</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">datetime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_gzip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">courses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#simeon.download.logs.process_line" title="Link to this definition">¶</a></dt>
<dd><p>Process the line from a tracking log file and return the reformatted
line (deserialized) along with the name of its destination file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>bytes</em><em>]</em>) – A line from the tracking logs</p></li>
<li><p><strong>lcount</strong> (<em>int</em>) – The line number of the given line</p></li>
<li><p><strong>date</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>datetime</em><em>]</em>) – The date of the file where this line comes from.</p></li>
<li><p><strong>is_gzip</strong> (<em>bool</em>) – Whether or not this line came from a GZIP file</p></li>
<li><p><strong>courses</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>]</em>) – A list of course IDs whose records are exported</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Union[Dict[str, str], str]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary with both the data and its destination file name</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.logs.split_tracking_log">
<span class="sig-prename descclassname"><span class="pre">simeon.download.logs.</span></span><span class="sig-name descname"><span class="pre">split_tracking_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">courses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.logs.split_tracking_log" title="Link to this definition">¶</a></dt>
<dd><p>Split the records in the given GZIP tracking log file.
This function is very resource hungry because it keeps around
a lot of open file handles and writes to them whenever it processes
a good record. Some attempts are made to keep records around whenever
the process is no longer allowed to open new files. But that will likely
lead to the exhaustion of the running process’s allotted memory.</p>
<dl class="field-list simple">
<dt class="field-odd">NOTE<span class="colon">:</span></dt>
<dd class="field-odd"><p>If you’ve got a better way, please update me.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The GZIP file to split</p></li>
<li><p><strong>ddir</strong> (<em>str</em>) – Destination directory of the generated file</p></li>
<li><p><strong>dynamic_date</strong> (<em>bool</em>) – Use dates from the JSON records to make
output file names</p></li>
<li><p><strong>courses</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>]</em>) – A list of course IDs whose records are exported</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where to find schema files</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if files have been generated. False, otherwise</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-simeon.download.sqls">
<span id="sql-data-files-module"></span><h2 id="module-simeon.download.sqls">SQL data files module<a class="headerlink" href="#module-simeon.download.sqls" title="Link to this heading">¶</a></h2>
<p>Module to process SQL files from edX</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.sqls.batch_decrypt_files">
<span class="sig-prename descclassname"><span class="pre">simeon.download.sqls.</span></span><span class="sig-name descname"><span class="pre">batch_decrypt_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.sqls.batch_decrypt_files" title="Link to this definition">¶</a></dt>
<dd><p>Batch the files by the given size and pass each batch to gpg to decrypt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_files</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of file names</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The batch size</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print the command to be run</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A logging.Logger object to print the command with</p></li>
<li><p><strong>timeout</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>None</em><em>]</em>) – Number of seconds to wait for the decryption to finish</p></li>
<li><p><strong>keepfiles</strong> (<em>bool</em>) – Keep the encrypted files after decrypting them.</p></li>
<li><p><strong>njobs</strong> (<em>int</em>) – Number of threads to use to call gpg in parallel</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but decrypts the .sql files from the given archive</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.sqls.force_delete_files">
<span class="sig-prename descclassname"><span class="pre">simeon.download.sqls.</span></span><span class="sig-name descname"><span class="pre">force_delete_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.sqls.force_delete_files" title="Link to this definition">¶</a></dt>
<dd><p>Delete the given files without regard for whatever or not they exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – Iterable of file names</p></li>
<li><p><strong>logger</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>logging.Logger</em><em>]</em>) – A logger object to log messages</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns nothing, but deletes the given files from the local FS</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.sqls.process_sql_archive">
<span class="sig-prename descclassname"><span class="pre">simeon.download.sqls.</span></span><span class="sig-name descname"><span class="pre">process_sql_archive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_edge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">courses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.sqls.process_sql_archive" title="Link to this definition">¶</a></dt>
<dd><p>Unpack and decrypt files inside the given archive</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive</strong> (<em>str</em>) – SQL data package (a ZIP archive)</p></li>
<li><p><strong>ddir</strong> (<em>str</em>) – The destination directory of the unpacked files</p></li>
<li><p><strong>include_edge</strong> (<em>bool</em>) – Include the files from the edge site</p></li>
<li><p><strong>courses</strong> (<em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>]</em>) – A list of course IDs whose data files are unpacked</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size of the thread or process pool doing the unpacking</p></li>
<li><p><strong>tables_only</strong> (<em>bool</em>) – Whether to extract file names only (no unarchiving)</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – Show the stacktrace when an error occurs</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Set[str]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A set of file names</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.sqls.unpacker">
<span class="sig-prename descclassname"><span class="pre">simeon.download.sqls.</span></span><span class="sig-name descname"><span class="pre">unpacker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpaths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.sqls.unpacker" title="Link to this definition">¶</a></dt>
<dd><p>A worker callable to pass a Thread or Process pool</p>
</dd></dl>
</section>
<section id="module-simeon.download.utilities">
<span id="utilities-module-for-the-download-package"></span><h2 id="module-simeon.download.utilities">Utilities module for the download package<a class="headerlink" href="#module-simeon.download.utilities" title="Link to this heading">¶</a></h2>
<p>Some utility functions for working with the downloaded data files</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.check_for_funny_keys">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">check_for_funny_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'toplevel'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.check_for_funny_keys" title="Link to this definition">¶</a></dt>
<dd><p>I am quite frankly not sure what Ike is trying to do here,
but there should be a better way.
For now, though, we’ll just have to make do.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the level of the dict</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record in place</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.decrypt_files">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">decrypt_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.decrypt_files" title="Link to this definition">¶</a></dt>
<dd><p>Decrypt the given file with gpg.
This assumes that the gpg command
is available in the SHELL running this script.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fnames</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>List</em><em>]</em>) – A file name or a list of file names to decrypt</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print the command to be run</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A logging.Logger object to print the command with</p></li>
<li><p><strong>timeout</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>None</em><em>]</em>) – Number of seconds to wait for the decryption to finish</p></li>
<li><p><strong>keepfiles</strong> (<em>bool</em>) – Keep the encrypted files after decryption, if True.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns True if the decryption does not fail</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>DecryptionError</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.drop_empties">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">drop_empties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.drop_empties" title="Link to this definition">¶</a></dt>
<dd><p>Recursive drop keys whose corresponding values are empty
from the given record.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>keys</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – multiple args</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record in place</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.format_sql_filename">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">format_sql_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.format_sql_filename" title="Link to this definition">¶</a></dt>
<dd><p>Reformat the given edX SQL encrypted file name into a name indicative
of where the file should end up after the SQL archive is unpacked.
site/folder/filename.ext.gpg</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.get_course_id">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">get_course_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.download.utilities.get_course_id" title="Link to this definition">¶</a></dt>
<dd><p>Given a JSON record, try getting the course_id out of it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – A deserialized JSON record</p></li>
<li><p><strong>paths</strong> (<em>Iterable</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>]</em>) – Paths to follow to find a matching course ID string</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A valid edX course ID or an empty string</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.get_file_date">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">get_file_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.get_file_date" title="Link to this definition">¶</a></dt>
<dd><p>Extract the date in a file name and parse it into a datetime object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>str</em>) – Some file name</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[None, datetime]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns a datetime object or None</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.get_module_id">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">get_module_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.get_module_id" title="Link to this definition">¶</a></dt>
<dd><p>Get the module ID of the given record</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – A deserialized JSON record</p></li>
<li><p><strong>paths</strong> (<em>Iterable</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>]</em>) – Paths to follow to find a matching course ID string</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A valid edX course ID or an empty string</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.get_sql_course_id">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">get_sql_course_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.download.utilities.get_sql_course_id" title="Link to this definition">¶</a></dt>
<dd><p>Given a course ID string from the SQL files,
pluck out of the actual course ID and format it as follows:
ORG/COURSE_NUMBER/TERM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>course_str</strong> (<em>str</em>) – The course ID string from edX</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Actual course ID and format it properly</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.is_float">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">is_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.is_float" title="Link to this definition">¶</a></dt>
<dd><p>Check that the string can be coerced into a float.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.make_file_handle">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">make_file_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'wt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_gzip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.make_file_handle" title="Link to this definition">¶</a></dt>
<dd><p>Create a file handle pointing the given file name.
If the directory of the file does not exist, create it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – A file name whose handle needs to be created.</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – “a[bt]?” for append or “w[bt]?” for write</p></li>
<li><p><strong>is_gzip</strong> (<em>bool</em>) – Open it as a gzip file handle, if True.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[TextIOWrapper, BufferedReader]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.make_tracklog_path">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">make_tracklog_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datestr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_gzip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.download.utilities.make_tracklog_path" title="Link to this definition">¶</a></dt>
<dd><p>Make a local file path name with the given course ID and datetime object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>course_id</strong> (<em>str</em>) – Properly formatted edX course ID</p></li>
<li><p><strong>datestr</strong> (<em>str</em>) – %Y-%m-%d formatted date associated with the tracking log</p></li>
<li><p><strong>is_gzip</strong> (<em>bool</em>) – Make a GZIP file, if True.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A local FS file path</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.move_field_to_mongoid">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">move_field_to_mongoid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.move_field_to_mongoid" title="Link to this definition">¶</a></dt>
<dd><p>Move the values associated with the given path
into record[‘mongoid’]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>path</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – A list of keys to traverse and move</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record in place</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.move_unknown_fields_to_agent">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">move_unknown_fields_to_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.move_unknown_fields_to_agent" title="Link to this definition">¶</a></dt>
<dd><p>Move the values associated with the given keys
into record[‘agent’]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>keys</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – multiple args</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record in place</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.parse_mongo_tstamp">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">parse_mongo_tstamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.parse_mongo_tstamp" title="Link to this definition">¶</a></dt>
<dd><p>Try converting a MongoDB timestamp into a stringified datetime</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<em>str</em>) – String representing a timestamp. This can be either a unix timestamp or a datetime.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A formatted datetime</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.rephrase_record">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">rephrase_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.rephrase_record" title="Link to this definition">¶</a></dt>
<dd><p>Update the given record in place. The purpose of this function
is to turn this record into something with the same schema as that of
the target BigQuery table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> (<em>dict</em>) – A deserialized JSON record</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but updates the given record in place</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.download.utilities.stringify_dict">
<span class="sig-prename descclassname"><span class="pre">simeon.download.utilities.</span></span><span class="sig-name descname"><span class="pre">stringify_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.download.utilities.stringify_dict" title="Link to this definition">¶</a></dt>
<dd><p>Given a dictionary and some keys, JSON stringify
the values at those keys in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>keys</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – multiple args</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the dict in place</p>
</dd>
</dl>
</dd></dl>
</section>
</section>
<section id="components-of-the-upload-package">
<h1 id="components-of-the-upload-package">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">upload</span></code> package<a class="headerlink" href="#components-of-the-upload-package" title="Link to this heading">¶</a></h1>
<section id="module-simeon.upload.gcp">
<span id="gcp-module"></span><h2 id="module-simeon.upload.gcp">GCP module<a class="headerlink" href="#module-simeon.upload.gcp" title="Link to this heading">¶</a></h2>
<p>Utilities functions and classes to help with loading data to Google Cloud</p>
<dl class="py class">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.upload.gcp.</span></span><span class="sig-name descname"><span class="pre">BigqueryClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_http</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_query_job_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_load_job_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient" title="Link to this definition">¶</a></dt>
<dd><p>Subclass bigquery.Client and add convenience methods</p>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.export_compiled_query">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">export_compiled_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.export_compiled_query" title="Link to this definition">¶</a></dt>
<dd><p>Export a query string to the target directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Compiled SQL query that is sent to BigQuery</p></li>
<li><p><strong>table</strong> (<em>str</em>) – Name of the table that is generated by the given query</p></li>
<li><p><strong>target_directory</strong> (<em>str</em>) – The directory under which the compiled SQL query is stored</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Stores SQL query under the given target directory</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.extract_error_messages">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extract_error_messages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.extract_error_messages" title="Link to this definition">¶</a></dt>
<dd><p>Return the error messages from given list of error objects (dict)</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.get_course_tables">
<span class="sig-name descname"><span class="pre">get_course_tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.get_course_tables" title="Link to this definition">¶</a></dt>
<dd><p>Get all the tables related to the given course ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>course_id</strong> (<em>str</em>) – edX course ID in format ORG/NUMBER/TERM</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, set]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dict with keys as log and sql, and values as table names</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.get_not_found_object">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_not_found_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.get_not_found_object" title="Link to this definition">¶</a></dt>
<dd><p>If the given message contains the keywords ‘Not found’, then
try and determine the name and type of the object that is not found.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.has_latest_table">
<span class="sig-name descname"><span class="pre">has_latest_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.has_latest_table" title="Link to this definition">¶</a></dt>
<dd><p>Check if the given table name exists in the _latest dataset
of the given course ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>course_id</strong> (<em>str</em>) – edX course ID in format ORG/NUMBER/TERM</p></li>
<li><p><strong>table</strong> (<em>str</em>) – Name of the table being looked up</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the table is currently in BigQuery</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.has_log_table">
<span class="sig-name descname"><span class="pre">has_log_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.has_log_table" title="Link to this definition">¶</a></dt>
<dd><p>Check if the given table name exists in the _logs dataset of
the given course ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>course_id</strong> (<em>str</em>) – edX course ID in format ORG/NUMBER/TERM</p></li>
<li><p><strong>table</strong> (<em>str</em>) – Name of the table being looked up</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the table is currently in BigQuery</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.load_one_file_to_table">
<span class="sig-name descname"><span class="pre">load_one_file_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bad_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.load_one_file_to_table" title="Link to this definition">¶</a></dt>
<dd><p>Load the given file to a target BigQuery table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – The specific file to load</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, email, log, rdx</p></li>
<li><p><strong>project</strong> (<em>str</em>) – Target GCP project</p></li>
<li><p><strong>create</strong> (<em>bool</em>) – Whether or not to create the destination table</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – Whether or not to append the records to the table</p></li>
<li><p><strong>use_storage</strong> (<em>bool</em>) – Whether or not to load the data from GCS</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – GCS bucket name to use</p></li>
<li><p><strong>max_bad_rows</strong> (<em>int</em>) – Max number of bad rows allowed during loading</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files are found</p></li>
<li><p><strong>format</strong> (<em>str</em>) – File format (json or csv)</p></li>
<li><p><strong>patch</strong> (<em>bool</em>) – Whether or not to patch the description of the table</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery.LoadJob</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The LoadJob object associated with the work being done</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>Propagates everything from the underlying package</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.load_tables_from_dir">
<span class="sig-name descname"><span class="pre">load_tables_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bad_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">LoadJob</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.load_tables_from_dir" title="Link to this definition">¶</a></dt>
<dd><p>Load all the files in the given directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Grandparent or parent directory of split up files</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, email, log, rdx</p></li>
<li><p><strong>project</strong> (<em>str</em>) – Target GCP project</p></li>
<li><p><strong>create</strong> (<em>bool</em>) – Whether or not to create the destination table</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – Whether or not to append the records to the table</p></li>
<li><p><strong>use_storage</strong> (<em>bool</em>) – Whether or not to load the data from GCS</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – GCS bucket name to use</p></li>
<li><p><strong>max_bad_rows</strong> (<em>int</em>) – Max number of bad rows allowed during loading</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – Directory where schema files are found</p></li>
<li><p><strong>format</strong> (<em>str</em>) – File format (json or csv)</p></li>
<li><p><strong>patch</strong> (<em>bool</em>) – Whether or not to patch the description of the table</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[bigquery.LoadJob]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of load jobs</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>Propagates everything from the underlying package</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.make_template">
<span class="sig-name descname"><span class="pre">make_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.make_template" title="Link to this definition">¶</a></dt>
<dd><p>Create a Template object whose environment includes some of the
client’s methods as filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) – SQL query to use with the template being generated</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>jinja2.Template</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jinja2 Template object with the passed query</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.BigqueryClient.merge_to_table">
<span class="sig-name descname"><span class="pre">merge_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_equal_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_unequal_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'target'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.BigqueryClient.merge_to_table" title="Link to this definition">¶</a></dt>
<dd><p>Merge the given file to the target table name.
If the latter does not exist, create it first.
This process waits for all the jobs needed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – A local file name or a GCS URI</p></li>
<li><p><strong>table</strong> (<em>str</em>) – Fully qualified BigQuery table name</p></li>
<li><p><strong>col</strong> (<em>str</em>) – Column by which to merge</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – The directory where schema files live</p></li>
<li><p><strong>use_storage</strong> (<em>bool</em>) – Whether or not the given path is a GCS URI</p></li>
<li><p><strong>patch</strong> (<em>bool</em>) – Whether or not to patch the description of the table</p></li>
<li><p><strong>match_equal_columns</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>, </em><em>Tuple</em><em>[</em><em>str</em><em>]</em><em>]</em>) – List of column names for which to set equality (=) if WHEN MATCH is met during the merge.</p></li>
<li><p><strong>match_unequal_columns</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>None</em><em>, </em><em>Tuple</em><em>[</em><em>str</em><em>]</em><em>]</em>) – List of column names for which to set inequality (&lt;&gt;) if WHEN MATCH is met during the merge.</p></li>
<li><p><strong>target_directory</strong> (<em>str</em>) – Target directory where to store SQL queries</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery.QueryJob</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The QueryJob object associated with the merge carried out</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>Propagates everything from the underlying package</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="simeon.upload.gcp.GCSClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.upload.gcp.</span></span><span class="sig-name descname"><span class="pre">GCSClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credentials=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_http=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_info=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_auth_w_custom_endpoint=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_headers={}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.GCSClient" title="Link to this definition">¶</a></dt>
<dd><p>Make a client to load data files to GCS</p>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.GCSClient.load_dir">
<span class="sig-name descname"><span class="pre">load_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.GCSClient.load_dir" title="Link to this definition">¶</a></dt>
<dd><p>Load all the files in the given directory or
any immediate subdirectories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – The directory whose files are loaded</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – GCS bucket name</p></li>
</ul>
</dd>
<dt class="field-even">Param<span class="colon">:</span></dt>
<dd class="field-even"><p>file_type: One of sql, email, log, rdx</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing, but should load file(s) in dirname to GCS</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>Propagates everything from the underlying package</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="simeon.upload.gcp.GCSClient.load_one_file_to_gcs">
<span class="sig-name descname"><span class="pre">load_one_file_to_gcs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.gcp.GCSClient.load_one_file_to_gcs" title="Link to this definition">¶</a></dt>
<dd><p>Load the given file to GCS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – The local file to load to GCS</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – GCS bucket name</p></li>
</ul>
</dd>
<dt class="field-even">Param<span class="colon">:</span></dt>
<dd class="field-even"><p>file_type: One of sql, email, log, rdx</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing, but should load the given file to GCS</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>Propagates everything from the underlying package</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
<section id="module-simeon.upload.utilities">
<span id="utilities-module-for-the-upload-package"></span><h2 id="module-simeon.upload.utilities">Utilities module for the upload package<a class="headerlink" href="#module-simeon.upload.utilities" title="Link to this heading">¶</a></h2>
<p>Utility functions and classes associated with uploading data to GCP, so far.</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.course_to_bq_dataset">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">course_to_bq_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.upload.utilities.course_to_bq_dataset" title="Link to this definition">¶</a></dt>
<dd><p>Make a fully qualified BigQuery dataset name with the given info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>course_id</strong> (<em>str</em>) – edX course ID to format into a GCS path</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, log, email, rdx</p></li>
<li><p><strong>project</strong> (<em>str</em>) – A GCP project ID</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>BigQuery dataset name with components separated by dots</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.course_to_gcs_folder">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">course_to_gcs_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">course_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.upload.utilities.course_to_gcs_folder" title="Link to this definition">¶</a></dt>
<dd><p>Use the given course ID to make a Google Cloud Storage path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>course_id</strong> (<em>str</em>) – edX course ID to format into a GCS path</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, log, email, rdx</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – A GCS bucket name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A nicely formatted GCS path</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.dict_to_schema_field">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">dict_to_schema_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.utilities.dict_to_schema_field" title="Link to this definition">¶</a></dt>
<dd><p>Make a SchemaField from a schema directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema_dict</strong> (<em>dict</em>) – One of the objects in the schema JSON file</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery.SchemaField</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A SchemaField matching the given dictionary’s name, type, etc.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.get_bq_schema">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">get_bq_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.utilities.get_bq_schema" title="Link to this definition">¶</a></dt>
<dd><p>Given a bare table name (without leading project or dataset),
make a list of bigquery.SchemaField objects to act as the table’s schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – A BigQuery (bare) table name</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – Directory where schema JSON file is looked up</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[List[bigquery.SchemaField], str]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple with list of bigquery.SchemaField objects and
a description text for the target table</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>MissingSchemaException</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.local_to_bq_table">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">local_to_bq_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.upload.utilities.local_to_bq_table" title="Link to this definition">¶</a></dt>
<dd><p>Use the given local file to make a fully qualified BigQuery table name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – A local file name</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, log, email, rdx</p></li>
<li><p><strong>project</strong> (<em>str</em>) – A GCP project ID</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>BigQuery dataset name with components separated by dots</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.local_to_gcs_path">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">local_to_gcs_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#simeon.upload.utilities.local_to_gcs_path" title="Link to this definition">¶</a></dt>
<dd><p>Convert the local file name into a GCS path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – A local file name</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – One of sql, log, email, rdx, cold</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – A GCS bucket name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A nicely formatted GCS path</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.make_bq_load_config">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">make_bq_load_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">','</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bad_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.utilities.make_bq_load_config" title="Link to this definition">¶</a></dt>
<dd><p>Make a bigquery.LoadJobConfig object and description of a table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – Fully qualified table name</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – The directory where schema files live</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – Whether to append the loaded to the table</p></li>
<li><p><strong>create</strong> (<em>bool</em>) – Whether to create the target table if it does not exist</p></li>
<li><p><strong>file_format</strong> (<em>str</em>) – One of sql, json, csv, txt</p></li>
<li><p><strong>delim</strong> (<em>str</em>) – The delimiter of the file being loaded</p></li>
<li><p><strong>max_bad_rows</strong> (<em>int</em>) – The number of bad rows to tolerate when loading the data</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[bigquery.LoadJobConfig, str]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 2-tuple with a bigquery.LoadJobConfig object and
a description text for the destination table</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.make_bq_query_config">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">make_bq_query_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.utilities.make_bq_query_config" title="Link to this definition">¶</a></dt>
<dd><p>Make a bigquery.QueryJobConfig object to tie to a query to be sent
to BigQuery for secondary table generation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<em>bool</em>) – Whether to append the loaded to the table</p></li>
<li><p><strong>plain</strong> (<em>bool</em>) – Make an empty QueryJobConfig object</p></li>
<li><p><strong>table</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Fully qualified name of a destination table</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery.QueryJobConfig</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Make a bigquery.QueryJobConfig object</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.upload.utilities.sqlify_bq_field">
<span class="sig-prename descclassname"><span class="pre">simeon.upload.utilities.</span></span><span class="sig-name descname"><span class="pre">sqlify_bq_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">named</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.upload.utilities.sqlify_bq_field" title="Link to this definition">¶</a></dt>
<dd><p>Convert a bigquery.SchemaField object into a DDL
column definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<em>bigquery.SchemaField</em>) – A SchemaField object to convert to a DDL statement</p></li>
<li><p><strong>named</strong> (<em>bool</em>) – Whether the returned statement start with the field name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A SQL column’s DDL statement</p>
</dd>
</dl>
</dd></dl>
</section>
</section>
<section id="components-of-the-report-package">
<h1 id="components-of-the-report-package">Components of the <code class="xref py py-class docutils literal notranslate"><span class="pre">report</span></code> package<a class="headerlink" href="#components-of-the-report-package" title="Link to this heading">¶</a></h1>
<section id="module-simeon.report.utilities">
<span id="utilities-module-for-the-report-package"></span><h2 id="module-simeon.report.utilities">Utilities module for the report package<a class="headerlink" href="#module-simeon.report.utilities" title="Link to this heading">¶</a></h2>
<p>Utility functions and classes to help with making course reports like user_info_combo, person_course, etc.</p>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.check_record_schema">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">check_record_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coerce</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nullify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.check_record_schema" title="Link to this definition">¶</a></dt>
<dd><p>Check that the given record matches the same keys found in the given
schema list of fields. The latter is one of the schemas in
simeon/upload/schemas/</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>schema</strong> (<em>Iterable</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>]</em><em>]</em><em>]</em>) – A list of dicts with info on BigQuery table fields</p></li>
<li><p><strong>coerce</strong> (<em>bool</em>) – Whether or not to coerce values into BigQuery types</p></li>
<li><p><strong>nullify</strong> (<em>bool</em>) – Whether to set values mapping missing keys to None</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record if needed</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>SchemaMismatchException</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.course_from_block">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">course_from_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.course_from_block" title="Link to this definition">¶</a></dt>
<dd><p>Extract a course ID from the given block ID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>block</strong> (<em>str</em>) – A module item’s block string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Extracts the course ID in a module’s block string</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.drop_extra_keys">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">drop_extra_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.drop_extra_keys" title="Link to this definition">¶</a></dt>
<dd><p>Walk through the record and drop key-value pairs that are not in the
given schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> (<em>dict</em>) – Dictionary whose values are modified</p></li>
<li><p><strong>schema</strong> (<em>Iterable</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>]</em><em>]</em><em>]</em>) – A list of dicts with info on BigQuery table fields</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Modifies the record if needed</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.extract_table_query">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">extract_table_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.extract_table_query" title="Link to this definition">¶</a></dt>
<dd><p>Given a table name and a query directory,
extract both the query string and the table description.
The latter is assumed to be any line in the query file
that starts with # or –</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – BigQuery table name whose query info is extracted</p></li>
<li><p><strong>query_dir</strong> (<em>str</em>) – The directory where the query file is expected to be</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[str, str]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple of strings (query string, table description)</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>MissingQueryFileException</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.get_has_solution">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">get_has_solution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.get_has_solution" title="Link to this definition">¶</a></dt>
<dd><p>Extract whether the given record is a problem that has showanswer.
If it’s present and its associated value is not “never”, then return True.
Otherwise, return False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> (<em>dict</em>) – A course_axis record</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Wether the course_axis record has a solution in the data</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.get_problem_nitems">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">get_problem_nitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.get_problem_nitems" title="Link to this definition">¶</a></dt>
<dd><p>Get a value for data.num_items in course_axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> (<em>dict</em>) – A course_axis record</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[int, None]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of subitems of a problem item</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.get_youtube_id">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">get_youtube_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.get_youtube_id" title="Link to this definition">¶</a></dt>
<dd><p>Given a course structure record, extract the YouTube ID
associated with the video element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> (<em>dict</em>) – A course_axis record</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[str, None]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The YouTube video ID associated with the record</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_course_axis">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_course_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'course_axis.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_course_axis" title="Link to this definition">¶</a></dt>
<dd><p>Given a course’s SQL directory, make a course_axis report</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the outname argument</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_forum_table">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_forum_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forum.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_forum_table" title="Link to this definition">¶</a></dt>
<dd><p>Generate a file to load into the forum table
using the given SQL directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – Directory where schema files live</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the target file</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_grades_persistent">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_grades_persistent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grades_persistent.json.gz'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">second_outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grades_persistent_subsection.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_grades_persistent" title="Link to this definition">¶</a></dt>
<dd><p>Given a course’s SQL directory, make the grades_persistent
and grades_persistent_subsection reports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the target files</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_grading_policy">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_grading_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grading_policy.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_grading_policy" title="Link to this definition">¶</a></dt>
<dd><p>Generate a file to be loaded into the grading_policy table
of the given SQL directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the target file</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_problem_analysis">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_problem_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extras</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_problem_analysis" title="Link to this definition">¶</a></dt>
<dd><p>Use the state record from a studentmodule record to make
a record to load into the problem_analysis table.
The state is assumed to be from record of category “problem”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>dict</em>) – Contents of the state field of studentmodule</p></li>
<li><p><strong>extras</strong> (<em>keyword arguments</em>) – Things to be added to the generated record</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Return a record to be loaded in problem_analysis</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_roles_table">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_roles_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roles.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_roles_table" title="Link to this definition">¶</a></dt>
<dd><p>Generate a file to be loaded into the roles table of a dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the target files</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_sql_tables_par">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_sql_tables_par</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_sql_tables_par" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of SQL directories, make the SQL tables
defined in this module.
This convenience function calls all the report generating functions
for the given directory name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirnames</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – Names of SQL directories</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print a message when a report is being made</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A logging.Logger object to print messages with</p></li>
<li><p><strong>fail_fast</strong> (<em>bool</em>) – Whether or not to bail after the first error</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – Show the stacktrace that caused the error</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – The directory where schema files live</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the files are generated, and False otherwise.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_sql_tables_seq">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_sql_tables_seq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_sql_tables_seq" title="Link to this definition">¶</a></dt>
<dd><p>Given an iterable of SQL directories, make the SQL tables
defined in this module.
This convenience function calls all the report generating functions
for the given directory name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirnames</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – Names of SQL directories</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print a message when a report is being made</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A logging.Logger object to print messages with</p></li>
<li><p><strong>fail_fast</strong> (<em>bool</em>) – Whether or not to bail after the first error</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – Show the stacktrace that caused the error</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – The directory where schema files live</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the files are generated, and False otherwise.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_student_module">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_student_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'studentmodule.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_student_module" title="Link to this definition">¶</a></dt>
<dd><p>Generate files to load into studentmodule and problem_analysis
using the given SQL directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>schema_dir</strong> (<em>str</em>) – Directory where schema files live</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the target files</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_table_from_sql">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_table_from_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">course_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/report/queries'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geocode.geoip'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">youtube_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'videos.youtube'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'target'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_table_from_sql" title="Link to this definition">¶</a></dt>
<dd><p>Generate a BigQuery table using the given table name,
course ID and a matching SQL query file in the query_dir folder.
The query file contains placeholder for course ID, dataset name and
other details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – table name</p></li>
<li><p><strong>course_id</strong> (<em>str</em>) – Course ID whose secondary reports are being generated</p></li>
<li><p><strong>client</strong> (<em>bigquery.Client</em>) – An authenticated bigquery.Client object</p></li>
<li><p><strong>project</strong> (<em>str</em>) – GCP project id where the video_axis table is loaded.</p></li>
<li><p><strong>query_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where query files are saved.</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
<li><p><strong>geo_table</strong> (<em>str</em>) – Table name in BigQuery with geolocation data for IPs</p></li>
<li><p><strong>youtube_table</strong> (<em>str</em>) – Table name in BigQuery with YouTube video details</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Whether to wait for the query job to finish running</p></li>
<li><p><strong>target_directory</strong> (<em>str</em>) – Name of a directory where compiled SQL queries are stored</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Dict[str, str]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the errors dictionary from the LoadJob object tied to the query</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_tables_from_sql">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_tables_from_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">course_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/report/queries'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geocode.geoip'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">youtube_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'videos.youtube'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'target'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_tables_from_sql" title="Link to this definition">¶</a></dt>
<dd><p>This is the plural/multiple tables version of make_table_from_sql</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tables</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – BigQuery table names to create or append to</p></li>
<li><p><strong>course_id</strong> (<em>str</em>) – Course ID whose secondary reports are being generated</p></li>
<li><p><strong>client</strong> (<em>bigquery.Client</em>) – An authenticated bigquery.Client object</p></li>
<li><p><strong>project</strong> (<em>str</em>) – GCP project id where the video_axis table is loaded.</p></li>
<li><p><strong>query_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where query files are saved.</p></li>
<li><p><strong>geo_table</strong> (<em>str</em>) – Table name in BigQuery with geolocation data for IPs</p></li>
<li><p><strong>youtube_table</strong> (<em>str</em>) – Table name in BigQuery with YouTube video details</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Whether to wait for the query job to finish running</p></li>
<li><p><strong>parallel</strong> (<em>bool</em>) – Whether the function is running in a process pool</p></li>
<li><p><strong>fail_fast</strong> (<em>bool</em>) – Whether to stop processing after the first error</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
<li><p><strong>target_directory</strong> (<em>str</em>) – Name of the directory where to store compiled SQL queries</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Dict[str, str]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Return a dict mapping table names to their corresponding errors</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_tables_from_sql_par">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_tables_from_sql_par</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">courses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/report/queries'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geocode.geoip'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">youtube_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'videos.youtube'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'target'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_tables_from_sql_par" title="Link to this definition">¶</a></dt>
<dd><p>Parallel version of make_tables_from_sql</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tables</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – An iterable of BigQuery table names</p></li>
<li><p><strong>courses</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – An iterable of course IDs</p></li>
<li><p><strong>project</strong> (<em>str</em>) – The GCP project against which queries are run</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – Whether to append query results to the target tables</p></li>
<li><p><strong>query_dir</strong> (<em>str</em>) – The directories where the SQL query files are found</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Whether to wait for the BigQuery load jobs to complete</p></li>
<li><p><strong>geo_table</strong> (<em>str</em>) – Table name in BigQuery with geolocation data for IPs</p></li>
<li><p><strong>youtube_table</strong> (<em>str</em>) – Table name in BigQuery with YouTube video details</p></li>
<li><p><strong>safile</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – GCP service account file to use to connect to BigQuery</p></li>
<li><p><strong>size</strong> (<em>int</em>) – Size of the process pool to run queries in parallel</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – A Logger object with which to report steps carried out</p></li>
<li><p><strong>fail_fast</strong> (<em>bool</em>) – Whether to stop processing after the first error</p></li>
<li><p><strong>schema_dir</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Directory where schema files live</p></li>
<li><p><strong>target_directory</strong> (<em>str</em>) – Directory where compiled SQL queries are stored.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Dict[str, Dict[str, str]]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dict mapping course_ids to tables and their query errors</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.make_user_info_combo">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">make_user_info_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/simeon/simeon/simeon/upload/schemas'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user_info_combo.json.gz'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.make_user_info_combo" title="Link to this definition">¶</a></dt>
<dd><p>Given a course’s SQL directory, make a user_info_combo report</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – Name of a course’s directory of SQL files</p></li>
<li><p><strong>outname</strong> (<em>str</em>) – The filename to give it to the generated report</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing, but writes the generated data to the outname argument</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.module_from_block">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">module_from_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.module_from_block" title="Link to this definition">¶</a></dt>
<dd><p>Extract a module ID from the given block</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>block</strong> (<em>str</em>) – A module item’s block string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Extracts the module ID in a module’s block string</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.process_course_structure">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">process_course_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.process_course_structure" title="Link to this definition">¶</a></dt>
<dd><p>The course structure data dictionary and starting point,
loop through it and construct course axis data items</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em>) – The data from the course_structure-analytics.json file</p></li>
<li><p><strong>start</strong> (<em>str</em>) – The key from data to start looking up children</p></li>
<li><p><strong>mapping</strong> (<em>dict</em>) – A dict mapping child blocks to their parents</p></li>
<li><p><strong>parent</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>str</em><em>]</em>) – Parent of start</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the list of constructed data items</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.wait_for_bq_job_ids">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">wait_for_bq_job_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.wait_for_bq_job_ids" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of BigQuery load or query job IDs,
wait for them all to finish.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_list</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – An Iterable of job IDs</p></li>
<li><p><strong>client</strong> (<em>google.cloud.bigquery.client.Client</em>) – A BigQuery Client object to do the waiting</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Dict[str, str]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns a dict of job IDs to job errors</p>
</dd>
<dt class="field-even">TODO<span class="colon">:</span></dt>
<dd class="field-even"><p>Improve this function to behave a little less like a tight loop</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="simeon.report.utilities.wait_for_bq_jobs">
<span class="sig-prename descclassname"><span class="pre">simeon.report.utilities.</span></span><span class="sig-name descname"><span class="pre">wait_for_bq_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.report.utilities.wait_for_bq_jobs" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of BigQuery load or query jobs,
wait for them all to finish.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>job_list</strong> (<em>Iterable</em><em>[</em><em>LoadJob</em><em>]</em>) – An Iterable of job objects from the bigquery package</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nothing</p>
</dd>
<dt class="field-even">TODO<span class="colon">:</span></dt>
<dd class="field-even"><p>Improve this function to behave a little less like a tight loop</p>
</dd>
</dl>
</dd></dl>
</section>
</section>
<section id="components-of-the-exceptions-package">
<h1 id="components-of-the-exceptions-package">Components of the <a class="reference internal" href="#module-simeon.exceptions" title="simeon.exceptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">exceptions</span></code></a> package<a class="headerlink" href="#components-of-the-exceptions-package" title="Link to this heading">¶</a></h1>
<section id="module-simeon.exceptions">
<span id="exceptions-module"></span><h2 id="module-simeon.exceptions">Exceptions module<a class="headerlink" href="#module-simeon.exceptions" title="Link to this heading">¶</a></h2>
<p>Exception classes for the simeon package</p>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.AWSException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">AWSException</span></span><a class="headerlink" href="#simeon.exceptions.AWSException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when an S3 resource can’t be made</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.BadSQLFileException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">BadSQLFileException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.BadSQLFileException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a SQL file is not in its expected format</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.BigQueryNameException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">BigQueryNameException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.BigQueryNameException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a fully qualified table or dataset name
can’t be created.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.BlobDownloadError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">BlobDownloadError</span></span><a class="headerlink" href="#simeon.exceptions.BlobDownloadError" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a Blob fails to download. This could be an upstream issue.
However, it can also be due to local file system access issues, or due
to exhausted system resources</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.DecryptionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">DecryptionError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.DecryptionError" title="Link to this definition">¶</a></dt>
<dd><p>Raised when the GPG decryption process fails.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.EarlyExitError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">EarlyExitError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.EarlyExitError" title="Link to this definition">¶</a></dt>
<dd><p>Raised when an early exit is requested by the end user of
the CLI tool</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.LoadJobException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">LoadJobException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.LoadJobException" title="Link to this definition">¶</a></dt>
<dd><p>Raised from a BigQuery data load job</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.MissingFileException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">MissingFileException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.MissingFileException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a necessary file is missing</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.MissingQueryFileException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">MissingQueryFileException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.MissingQueryFileException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a report table does not have a query file
in the given query directory.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.MissingSchemaException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">MissingSchemaException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.MissingSchemaException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a schema could not be found for a given BigQuery table name</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.SQLQueryException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">SQLQueryException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.SQLQueryException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when calling client.query raises an error</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.SchemaMismatchException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">SchemaMismatchException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.SchemaMismatchException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when a record does not match its corresponding schema</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.SimeonError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">SimeonError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.SimeonError" title="Link to this definition">¶</a></dt>
<dd><p>Base exception for most simeon issues</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="simeon.exceptions.SplitException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simeon.exceptions.</span></span><span class="sig-name descname"><span class="pre">SplitException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#simeon.exceptions.SplitException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when an issue happens during a split operation</p>
</dd></dl>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="cli_intro.html" title="simeon"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> simeon </span>
              </div>
            </a>
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2021, MIT Institutional Research.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>